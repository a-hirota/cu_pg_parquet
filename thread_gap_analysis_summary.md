# thread_idギャップ分析結果

## 発見事項

### 1. 欠落thread_id（4個）
- thread_id 1048576 (0x00100000) - 2^20
- thread_id 1398102 (0x00155556)
- thread_id 2097153 (0x00200001)
- thread_id 2446679 (0x00255557)

### 2. 欠落キーとthread_idギャップの相関

チャンク0の7個の欠落キーのうち、6個が欠落thread_idを含むギャップで発生:

| 欠落キー | 前thread_id | 後thread_id | ギャップ内の欠落thread_id |
|---------|------------|------------|------------------------|
| 476029  | 2446678    | 4012015    | [2446679] |
| 1227856 | 2796203    | 4214620    | なし |
| 2731633 | 349524     | 2796205    | [1048576, 1398102, 2097153, 2446679] |
| 3483451 | 1747627    | 3606755    | [2097153, 2446679] |
| 4235332 | 699050     | 2998798    | [1048576, 1398102, 2097153, 2446679] |
| 4987296 | 2097152    | 3809386    | [2097153, 2446679] |
| 5739177 | 1398101    | 3404093    | [1398102, 2097153, 2446679] |

### 3. パターン分析

#### thread_id 1048576の特徴:
- 2^20（1,048,576）
- メモリ位置: 0x47E00000（正確に1150MB）
- 完全にアライメントされた位置（1MBアライメント）

#### メモリ位置:
- thread_id 1048576: 1150.00MB
- thread_id 1398102: 1533.33MB  
- thread_id 2097153: 2300.00MB
- thread_id 2446679: 2683.34MB

### 4. 結論

**14個の欠落キーの大部分が、4個の欠落thread_idに関連している可能性が高い。**

特にthread_id 1048576は2^20という特殊な値で、CUDAカーネルの実装で特別な処理が必要な境界値の可能性がある。

## 推奨される対策

1. CUDAカーネルでthread_id生成ロジックを確認
2. 特に2^20などの境界値での処理を検証
3. thread_idスキップが発生しないようカーネル修正