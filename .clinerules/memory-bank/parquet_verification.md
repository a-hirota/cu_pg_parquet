# Parquet ファイル検証手順

このドキュメントでは、出力された Parquet ファイル（例: `lineorder_multigpu_output/lineorder_part1.parquet`）が正常であることを cuDF を用いて検証する方法を説明します。

---

## 検証方法

1. **環境の準備**
   Parquet ファイルの検証を行う前に、cuDF 開発環境「cudf_dev」をアクティブにしてください。
   コマンド例:
   ```
   conda activate cudf_dev
   ```

2. **テストスクリプトの実行**
   プロジェクト内に検証用の Python スクリプトが既に用意されています。以下のコマンドでそのスクリプトを実行し、Parquet ファイルを読み込みます:
   ```
   python test_sql_chunk_output/test_parquet_with_cudf.py
   ```

3. **出力内容の確認**
   スクリプト実行後、以下のような情報が出力されます:
   - **ファイルサイズ**、**行数**、**列数**
   - **PyArrow や Pandas、cuDF** の各種スキーマ情報
   - 先頭5行などの **データサンプル**
   - 各カラムの統計情報（有効値、NULL 値、一意値の数など）

   これにより、出力された Parquet ファイルが正しいフォーマットで保存されているかどうか、さらに各カラムの内容が期待通りになっているかを確認できます。

---

## 備考

- この検証用スクリプトは、`test_sql_chunk_output/test_parquet_with_cudf.py` 内に実装されています。必要に応じて内容を参照してください。
- cuDF での読み込みに成功すれば、読み込んだデータのスキーマ、行数、先頭行のサンプルが表示されます。読み込みエラーが発生する場合は、Parquet ファイルが破損しているか、保存時に問題があった可能性があります。
- 検証時は常に、`conda activate cudf_dev` を実行して、cuDF の依存環境でテストしてください。

---

この手順で、出力された Parquet ファイルが正常に読み込めるかどうかを検証できます。
